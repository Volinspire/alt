{"version":3,"file":"alt.es6.js","sources":["../node_modules/fbjs/lib/invariant.js","../node_modules/flux/lib/Dispatcher.js","../node_modules/flux/index.js","../src/functions.js","../src/utils/StateFunctions.js","../src/utils/AltUtils.js","../node_modules/transmitter/dist/transmitter.js","../src/store/AltStore.js","../src/store/StoreMixin.js","../src/store/index.js","../node_modules/is-promise/index.js","../src/actions/index.js","../src/index.js"],"sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error('Invariant Violation: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n","export const isFunction = x => typeof x === 'function'\n\nexport function isMutableObject(target) {\n  const Ctor = target.constructor\n\n  return (\n    !!target\n    &&\n    Object.prototype.toString.call(target) === '[object Object]'\n    &&\n    isFunction(Ctor)\n    &&\n    !Object.isFrozen(target)\n    &&\n    (Ctor instanceof Ctor || target.type === 'AltStore')\n  )\n}\n\nexport function eachObject(f, o) {\n  o.forEach((from) => {\n    Object.keys(Object(from)).forEach((key) => {\n      f(key, from[key])\n    })\n  })\n}\n\nexport function assign(target, ...source) {\n  eachObject((key, value) => target[key] = value, source)\n  return target\n}\n","import * as fn from '../functions'\n\nexport function setAppState(instance, data, onStore) {\n  const obj = instance.deserialize(data)\n  fn.eachObject((key, value) => {\n    const store = instance.stores[key]\n    if (store) {\n      const { config } = store.StoreModel\n      const state = store.state\n      if (config.onDeserialize) obj[key] = config.onDeserialize(value) || value\n      if (fn.isMutableObject(state)) {\n        fn.eachObject(k => delete state[k], [state])\n        fn.assign(state, obj[key])\n      } else {\n        store.state = obj[key]\n      }\n      onStore(store, store.state)\n    }\n  }, [obj])\n}\n\nexport function snapshot(instance, storeNames = []) {\n  const stores = storeNames.length ? storeNames : Object.keys(instance.stores)\n  return stores.reduce((obj, storeHandle) => {\n    const storeName = storeHandle.displayName || storeHandle\n    const store = instance.stores[storeName]\n    const { config } = store.StoreModel\n    store.lifecycle('snapshot')\n    const customSnapshot = config.onSerialize &&\n      config.onSerialize(store.state)\n    obj[storeName] = customSnapshot ? customSnapshot : store.getState()\n    return obj\n  }, {})\n}\n\nexport function saveInitialSnapshot(instance, key) {\n  const state = instance.deserialize(\n    instance.serialize(instance.stores[key].state)\n  )\n  instance._initSnapshot[key] = state\n  instance._lastSnapshot[key] = state\n}\n\nexport function filterSnapshots(instance, state, stores) {\n  return stores.reduce((obj, store) => {\n    const storeName = store.displayName || store\n    if (!state[storeName]) {\n      throw new ReferenceError(`${storeName} is not a valid store`)\n    }\n    obj[storeName] = state[storeName]\n    return obj\n  }, {})\n}\n","import * as fn from '../functions'\n\n/*eslint-disable*/\nconst builtIns = Object.getOwnPropertyNames(NoopClass)\nconst builtInProto = Object.getOwnPropertyNames(NoopClass.prototype)\n/*eslint-enable*/\n\nexport function getInternalMethods(Obj, isProto) {\n  const excluded = isProto ? builtInProto : builtIns\n  const obj = isProto && typeof Obj === 'function' ? Obj.prototype : Obj\n  return Object.getOwnPropertyNames(obj).reduce((value, m) => {\n    if (excluded.indexOf(m) !== -1) {\n      return value\n    }\n\n    value[m] = obj[m]\n    return value\n  }, {})\n}\n\nexport function getPrototypeChain(Obj, methods = {}) {\n  return Obj === Object.prototype\n    ? methods\n    : getPrototypeChain(\n        Object.getPrototypeOf((typeof Obj === 'function') ? Obj.prototype : Obj),\n        fn.assign(getInternalMethods(Obj, true), methods)\n      )\n}\n\nexport function warn(msg) {\n  /* istanbul ignore else */\n  /*eslint-disable*/\n  if (typeof console !== 'undefined') {\n    console.warn(new ReferenceError(msg))\n  }\n  /*eslint-enable*/\n}\n\nexport function uid(container, name) {\n  let count = 0\n  let key = name\n  while (Object.hasOwnProperty.call(container, key)) {\n    key = name + String(++count)\n  }\n  return key\n}\n\nexport function formatAsConstant(name) {\n  return name.replace(/[a-z]([A-Z])/g, (i) => {\n    return `${i[0]}_${i[1].toLowerCase()}`\n  }).toUpperCase()\n}\n\nexport function dispatchIdentity(x, ...a) {\n  if (x === undefined) return null\n  return a.length ? [x].concat(a) : x\n}\n\nexport function fsa(id, type, payload, details) {\n  return {\n    type,\n    payload,\n    meta: {\n      dispatchId: id,\n      ...details,\n    },\n\n    id,\n    action: type,\n    data: payload,\n    details,\n  }\n}\n\nexport function dispatch(id, actionObj, payload, alt) {\n  const data = actionObj.dispatch(payload)\n  if (data === undefined) return null\n\n  const type = actionObj.id\n  const namespace = type\n  const name = type\n  const details = { id: type, namespace, name }\n\n  const dispatchLater = x => alt.dispatch(type, x, details)\n\n  if (fn.isFunction(data)) return data(dispatchLater, alt)\n\n    // XXX standardize this\n  return alt.dispatcher.dispatch(fsa(id, type, data, details))\n}\n\n/* istanbul ignore next */\nfunction NoopClass() { }\n","\"use strict\";\n\nfunction transmitter() {\n  var subscriptions = [];\n  var nowDispatching = false;\n  var toUnsubscribe = {};\n\n  var unsubscribe = function unsubscribe(onChange) {\n    var id = subscriptions.indexOf(onChange);\n    if (id < 0) return;\n    if (nowDispatching) {\n      toUnsubscribe[id] = onChange;\n      return;\n    }\n    subscriptions.splice(id, 1);\n  };\n\n  var subscribe = function subscribe(onChange) {\n    var id = subscriptions.push(onChange);\n    var dispose = function dispose() {\n      return unsubscribe(onChange);\n    };\n    return { dispose: dispose };\n  };\n\n  var publish = function publish() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    nowDispatching = true;\n    try {\n      subscriptions.forEach(function (subscription, id) {\n        return toUnsubscribe[id] || subscription.apply(undefined, args);\n      });\n    } finally {\n      nowDispatching = false;\n      Object.keys(toUnsubscribe).forEach(function (id) {\n        return unsubscribe(toUnsubscribe[id]);\n      });\n      toUnsubscribe = {};\n    }\n  };\n\n  return {\n    publish: publish,\n    subscribe: subscribe,\n    $subscriptions: subscriptions\n  };\n}\n\nmodule.exports = transmitter;","import * as fn from '../functions'\nimport transmitter from 'transmitter'\n\nclass AltStore {\n  constructor(alt, model, state, StoreModel) {\n    const lifecycleEvents = model.lifecycleEvents\n    this.transmitter = transmitter()\n    this.lifecycle = (event, x) => {\n      if (lifecycleEvents[event]) lifecycleEvents[event].publish(x)\n    }\n    this.state = state\n\n    this.alt = alt\n    this.preventDefault = false\n    this.displayName = model.displayName\n    this.boundListeners = model.boundListeners\n    this.StoreModel = StoreModel\n    this.reduce = model.reduce || (x => x)\n    this.subscriptions = []\n\n    const output = model.output || (x => x)\n\n    this.emitChange = () => this.transmitter.publish(output(this.state))\n\n    const handleDispatch = (f, payload) => {\n      try {\n        return f()\n      } catch (e) {\n        if (model.handlesOwnErrors) {\n          this.lifecycle('error', {\n            error: e,\n            payload,\n            state: this.state,\n          })\n          return false\n        }\n\n        throw e\n      }\n    }\n\n    fn.assign(this, model.publicMethods)\n\n    // Register dispatcher\n    this.dispatchToken = alt.dispatcher.register((payload) => {\n      this.preventDefault = false\n\n      this.lifecycle('beforeEach', {\n        payload,\n        state: this.state,\n      })\n\n      const actionHandlers = model.actionListeners[payload.action]\n\n      if (actionHandlers || model.otherwise) {\n        let result\n\n        if (actionHandlers) {\n          result = handleDispatch(() => {\n            return actionHandlers.filter(Boolean).every((handler) => {\n              return handler.call(model, payload.data, payload.action) !== false\n            })\n          }, payload)\n        } else {\n          result = handleDispatch(() => {\n            return model.otherwise(payload.data, payload.action)\n          }, payload)\n        }\n\n        if (result !== false && !this.preventDefault) this.emitChange()\n      }\n\n      if (model.reduce) {\n        handleDispatch(() => {\n          const value = model.reduce(this.state, payload)\n          if (value !== undefined) this.state = value\n        }, payload)\n        if (!this.preventDefault) this.emitChange()\n      }\n\n      this.lifecycle('afterEach', {\n        payload,\n        state: this.state,\n      })\n    })\n\n    this.lifecycle('init')\n  }\n\n  listen(cb) {\n    if (!fn.isFunction(cb)) throw new TypeError('listen expects a function')\n    const { dispose } = this.transmitter.subscribe(cb)\n    this.subscriptions.push({ cb, dispose })\n    return () => {\n      this.lifecycle('unlisten')\n      dispose()\n    }\n  }\n\n  unlisten(cb) {\n    this.lifecycle('unlisten')\n    this.subscriptions\n      .filter(subscription => subscription.cb === cb)\n      .forEach(subscription => subscription.dispose())\n  }\n\n  getState() {\n    return this.StoreModel.config.getState.call(this, this.state)\n  }\n}\n\nexport default AltStore\n","import transmitter from 'transmitter'\nimport * as fn from '../functions'\n\nconst StoreMixin = {\n  waitFor(...sources) {\n    if (!sources.length) {\n      throw new ReferenceError('Dispatch tokens not provided')\n    }\n\n    let sourcesArray = sources\n    if (sources.length === 1) {\n      sourcesArray = Array.isArray(sources[0]) ? sources[0] : sources\n    }\n\n    const tokens = sourcesArray.map((source) => {\n      return source.dispatchToken || source\n    })\n\n    this.dispatcher.waitFor(tokens)\n  },\n\n  exportAsync(asyncMethods) {\n    this.registerAsync(asyncMethods)\n  },\n\n  registerAsync(asyncDef) {\n    let loadCounter = 0\n\n    const asyncMethods = fn.isFunction(asyncDef)\n      ? asyncDef(this.alt)\n      : asyncDef\n\n    const toExport = Object.keys(asyncMethods).reduce((publicMethods, methodName) => {\n      const desc = asyncMethods[methodName]\n      const spec = fn.isFunction(desc) ? desc(this) : desc\n\n      const validHandlers = ['success', 'error', 'loading']\n      validHandlers.forEach((handler) => {\n        if (spec[handler] && !spec[handler].id) {\n          throw new Error(`${handler} handler must be an action function`)\n        }\n      })\n\n      publicMethods[methodName] = (...args) => {\n        const state = this.getInstance().getState()\n        const value = spec.local && spec.local(state, ...args)\n        const shouldFetch = spec.shouldFetch\n          ? spec.shouldFetch(state, ...args)\n          /*eslint-disable*/\n          : value == null\n          /*eslint-enable*/\n        const intercept = spec.interceptResponse || (x => x)\n\n        const makeActionHandler = (action, isError) => {\n          return (x) => {\n            const fire = () => {\n              loadCounter -= 1\n              action(intercept(x, action, args))\n              if (isError) throw x\n              return x\n            }\n            return this.alt.trapAsync ? () => fire() : fire()\n          }\n        }\n\n        // if we don't have it in cache then fetch it\n        if (shouldFetch) {\n          loadCounter += 1\n          /* istanbul ignore else */\n          if (spec.loading) spec.loading(intercept(null, spec.loading, args))\n          return spec.remote(state, ...args).then(\n            makeActionHandler(spec.success),\n            makeActionHandler(spec.error, 1)\n          )\n        }\n\n        // otherwise emit the change now\n        this.emitChange()\n        return value\n      }\n\n      return publicMethods\n    }, {})\n\n    this.exportPublicMethods(toExport)\n    this.exportPublicMethods({\n      isLoading: () => loadCounter > 0,\n    })\n  },\n\n  exportPublicMethods(methods) {\n    fn.eachObject((methodName, value) => {\n      if (!fn.isFunction(value)) {\n        throw new TypeError('exportPublicMethods expects a function')\n      }\n\n      this.publicMethods[methodName] = value\n    }, [methods])\n  },\n\n  emitChange() {\n    this.getInstance().emitChange()\n  },\n\n  on(lifecycleEvent, handler) {\n    if (lifecycleEvent === 'error') this.handlesOwnErrors = true\n    const bus = this.lifecycleEvents[lifecycleEvent] || transmitter()\n    this.lifecycleEvents[lifecycleEvent] = bus\n    return bus.subscribe(handler.bind(this))\n  },\n\n  bindAction(symbol, handler) {\n    if (!symbol) {\n      throw new ReferenceError('Invalid action reference passed in')\n    }\n    if (!fn.isFunction(handler)) {\n      throw new TypeError('bindAction expects a function')\n    }\n\n    // You can pass in the constant or the function itself\n    const key = symbol.id ? symbol.id : symbol\n    this.actionListeners[key] = this.actionListeners[key] || []\n    this.actionListeners[key].push(handler.bind(this))\n    this.boundListeners.push(key)\n  },\n\n  bindActions(actions) {\n    fn.eachObject((action, symbol) => {\n      const matchFirstCharacter = /./\n      const assumedEventHandler = action.replace(matchFirstCharacter, (x) => {\n        return `on${x[0].toUpperCase()}`\n      })\n\n      if (this[action] && this[assumedEventHandler]) {\n        // If you have both action and onAction\n        throw new ReferenceError(\n          `You have multiple action handlers bound to an action: ` +\n          `${action} and ${assumedEventHandler}`\n        )\n      }\n\n      const handler = this[action] || this[assumedEventHandler]\n      if (handler) {\n        this.bindAction(symbol, handler)\n      }\n    }, [actions])\n  },\n\n  bindListeners(obj) {\n    fn.eachObject((methodName, symbol) => {\n      const listener = this[methodName]\n\n      if (!listener) {\n        throw new ReferenceError(\n          `${methodName} defined but does not exist in ${this.displayName}`\n        )\n      }\n\n      if (Array.isArray(symbol)) {\n        symbol.forEach((action) => {\n          this.bindAction(action, listener)\n        })\n      } else {\n        this.bindAction(symbol, listener)\n      }\n    }, [obj])\n  },\n}\n\nexport default StoreMixin\n","import * as utils from '../utils/AltUtils'\nimport * as fn from '../functions'\nimport AltStore from './AltStore'\nimport StoreMixin from './StoreMixin'\n\nfunction doSetState(store, storeInstance, state) {\n  if (!state) {\n    return\n  }\n\n  const { config } = storeInstance.StoreModel\n\n  const nextState = fn.isFunction(state)\n    ? state(storeInstance.state)\n    : state\n\n  storeInstance.state = config.setState.call(\n    store,\n    storeInstance.state,\n    nextState\n  )\n\n  if (!store.alt.dispatcher.isDispatching()) {\n    store.emitChange()\n  }\n}\n\nfunction createPrototype(proto, alt, key, extras) {\n  return fn.assign(proto, StoreMixin, {\n    displayName: key,\n    alt: alt,\n    dispatcher: alt.dispatcher,\n    preventDefault() {\n      this.getInstance().preventDefault = true\n    },\n    boundListeners: [],\n    lifecycleEvents: {},\n    actionListeners: {},\n    publicMethods: {},\n    handlesOwnErrors: false,\n  }, extras)\n}\n\nexport function createStoreConfig(globalConfig, StoreModel) {\n  StoreModel.config = fn.assign({\n    getState(state) {\n      if (Array.isArray(state)) {\n        return state.slice()\n      } else if (fn.isMutableObject(state)) {\n        return fn.assign({}, state)\n      }\n\n      return state\n    },\n    setState(currentState, nextState) {\n      if (fn.isMutableObject(nextState)) {\n        return fn.assign(currentState, nextState)\n      }\n      return nextState\n    },\n  }, globalConfig, StoreModel.config)\n}\n\nexport function transformStore(transforms, StoreModel) {\n  return transforms.reduce((Store, transform) => transform(Store), StoreModel)\n}\n\nexport function createStoreFromObject(alt, StoreModel, key) {\n  let storeInstance\n\n  const StoreProto = createPrototype({}, alt, key, fn.assign({\n    getInstance() {\n      return storeInstance\n    },\n    setState(nextState) {\n      doSetState(this, storeInstance, nextState)\n    },\n  }, StoreModel))\n\n  // bind the store listeners\n  /* istanbul ignore else */\n  if (StoreProto.bindListeners) {\n    StoreMixin.bindListeners.call(\n      StoreProto,\n      StoreProto.bindListeners,\n    )\n  }\n  /* istanbul ignore else */\n  if (StoreProto.observe) {\n    StoreMixin.bindListeners.call(\n      StoreProto,\n      StoreProto.observe(alt),\n    )\n  }\n\n  // bind the lifecycle events\n  /* istanbul ignore else */\n  if (StoreProto.lifecycle) {\n    fn.eachObject((eventName, event) => {\n      StoreMixin.on.call(StoreProto, eventName, event)\n    }, [StoreProto.lifecycle])\n  }\n\n  // create the instance and fn.assign the public methods to the instance\n  storeInstance = fn.assign(\n    new AltStore(\n      alt,\n      StoreProto,\n      StoreProto.state !== undefined ? StoreProto.state : {},\n      StoreModel\n    ),\n    StoreProto.publicMethods,\n    {\n      displayName: key,\n      config: StoreModel.config,\n    }\n  )\n\n  return storeInstance\n}\n\nexport function createStoreFromClass(alt, StoreModel, key, ...argsForClass) {\n  let storeInstance\n  const { config } = StoreModel\n\n  // Creating a class here so we don't overload the provided store's\n  // prototype with the mixin behaviour and I'm extending from StoreModel\n  // so we can inherit any extensions from the provided store.\n  class Store extends StoreModel {\n    constructor(...args) {\n      super(...args)\n    }\n  }\n\n  createPrototype(Store.prototype, alt, key, {\n    type: 'AltStore',\n    getInstance() {\n      return storeInstance\n    },\n    setState(nextState) {\n      doSetState(this, storeInstance, nextState)\n    },\n  })\n\n  const store = new Store(...argsForClass)\n\n  /* istanbul ignore next */\n  if (config.bindListeners) store.bindListeners(config.bindListeners)\n    /* istanbul ignore next */\n  if (config.datasource) store.registerAsync(config.datasource)\n\n  storeInstance = fn.assign(\n    new AltStore(\n      alt,\n      store,\n      store.state !== undefined ? store.state : store,\n      StoreModel\n    ),\n    utils.getInternalMethods(StoreModel),\n    config.publicMethods,\n    { displayName: key },\n  )\n\n  return storeInstance\n}\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","import * as fn from '../functions'\nimport * as utils from '../utils/AltUtils'\nimport isPromise from 'is-promise'\n\nexport default function makeAction(alt, namespace, name, implementation, obj) {\n  const id = utils.uid(alt._actionsRegistry, `${namespace}.${name}`)\n  alt._actionsRegistry[id] = 1\n\n\n  let logAs\n  let storeStateToLog\n  // Set action's log level\n  if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n    logAs = Reflect.getOwnMetadata('alt:meta:logAs', implementation)\n  }\n  // Set action's additional store state data\n  if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n    storeStateToLog = Reflect.getOwnMetadata(\n      'alt:meta:storeStateToLog',\n      implementation\n    )\n  }\n\n  const data = { id, namespace, name, logAs, storeStateToLog }\n\n  const dispatch = (payload) => alt.dispatch(id, payload, data)\n\n  // the action itself\n  const action = (...args) => {\n    let inject\n    // check for action's implementation metadata if dispatch should be injected\n    // for example when decorated via @Reflect.metadata\n    // (https://github.com/rbuckton/ReflectDecorators#syntax)\n    if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n      inject = Reflect.getOwnMetadata('alt:injectDispatch', implementation)\n\n      if (inject === true) {\n        // diff number of declared arguments and number of passed in arguments\n        const diff = implementation.length - args.length\n\n        if (diff > 0) {\n          const optionalArgs = Array.apply(null, Array(diff))\n          // explicitely pass optional parameters as undefined\n          args.push.apply(args, optionalArgs)\n        }\n\n        // pass dispatch as the n+1 th parameter to action implementation\n        args.push(dispatch)\n      }\n    }\n\n    const invocationResult = implementation.apply(obj, args)\n\n    let actionResult = invocationResult\n\n    // async functions that return promises should not be dispatched\n    if (invocationResult !== undefined && !isPromise(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt)\n      } else {\n        if (!inject) {\n          dispatch(invocationResult)\n        }\n      }\n    }\n\n    if (!inject && invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched')\n    }\n\n    return actionResult\n  }\n  action.defer = (...args) => setTimeout(() => action.apply(null, args))\n  action.id = id\n  action.data = data\n  action.dispatch = dispatch\n\n  // ensure each reference is unique in the namespace\n  const container = alt.actions[namespace]\n  const namespaceId = utils.uid(container, name)\n  container[namespaceId] = action\n\n  // generate a constant\n  const constant = utils.formatAsConstant(namespaceId)\n  container[constant] = id\n\n  return action\n}\n","/* global window */\nimport { Dispatcher } from 'flux'\n\nimport * as StateFunctions from './utils/StateFunctions'\nimport * as fn from './functions'\nimport * as store from './store'\nimport * as utils from './utils/AltUtils'\nimport makeAction from './actions'\n\nclass Alt {\n  constructor(config = {}) {\n    this.config = config\n    this.serialize = config.serialize || JSON.stringify\n    this.deserialize = config.deserialize || JSON.parse\n    this.dispatcher = config.dispatcher || new Dispatcher()\n    this.batchingFunction = config.batchingFunction || (callback => callback())\n    this.actions = { global: {} }\n    this.stores = {}\n    this.storeTransforms = config.storeTransforms || []\n    this.trapAsync = false\n    this._actionsRegistry = {}\n    this._initSnapshot = {}\n    this._lastSnapshot = {}\n  }\n\n  dispatch(action, data, details) {\n    this.batchingFunction(() => {\n      const id = Math.random().toString(18).substr(2, 16)\n\n      // support straight dispatching of FSA-style actions\n      if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n        const fsaDetails = {\n          id: action.type,\n          namespace: action.type,\n          name: action.type,\n        }\n        return this.dispatcher.dispatch(\n          utils.fsa(id, action.type, action.payload, fsaDetails)\n        )\n      }\n\n      if (action.id && action.dispatch) {\n        return utils.dispatch(id, action, data, this)\n      }\n\n      return this.dispatcher.dispatch(utils.fsa(id, action, data, details))\n    })\n  }\n\n  createUnsavedStore(StoreModel, ...args) {\n    const key = StoreModel.displayName || ''\n    store.createStoreConfig(this.config, StoreModel)\n    const Store = store.transformStore(this.storeTransforms, StoreModel)\n\n    return fn.isFunction(Store)\n      ? store.createStoreFromClass(this, Store, key, ...args)\n      : store.createStoreFromObject(this, Store, key)\n  }\n\n  createStore(StoreModel, iden, ...args) {\n    let key = iden || StoreModel.displayName || StoreModel.name || ''\n    store.createStoreConfig(this.config, StoreModel)\n    const Store = store.transformStore(this.storeTransforms, StoreModel)\n\n    /* istanbul ignore next */\n    if (module.hot) delete this.stores[key]\n\n    if (this.stores[key] || !key) {\n      if (this.stores[key]) {\n        utils.warn(\n          `A store named ${key} already exists, double check your store ` +\n          `names or pass in your own custom identifier for each store`\n        )\n      } else {\n        utils.warn('Store name was not specified')\n      }\n\n      key = utils.uid(this.stores, key)\n    }\n\n    const storeInstance = fn.isFunction(Store)\n      ? store.createStoreFromClass(this, Store, key, ...args)\n      : store.createStoreFromObject(this, Store, key)\n\n    this.stores[key] = storeInstance\n    StateFunctions.saveInitialSnapshot(this, key)\n\n    return storeInstance\n  }\n\n  generateActions(...actionNames) {\n    const actions = { name: 'global' }\n    return this.createActions(actionNames.reduce((obj, action) => {\n      obj[action] = utils.dispatchIdentity\n      return obj\n    }, actions))\n  }\n\n  createAction(name, implementation, obj) {\n    return makeAction(this, 'global', name, implementation, obj)\n  }\n\n  createActions(ActionsClass, exportObj = {}, ...argsForConstructor) {\n    const actions = {}\n    const key = utils.uid(\n      this._actionsRegistry,\n      ActionsClass.displayName || ActionsClass.name || 'Unknown'\n    )\n\n    if (fn.isFunction(ActionsClass)) {\n      fn.assign(actions, utils.getPrototypeChain(ActionsClass))\n      class ActionsGenerator extends ActionsClass {\n        constructor(...args) {\n          super(...args)\n        }\n\n        generateActions(...actionNames) {\n          actionNames.forEach((actionName) => {\n            actions[actionName] = utils.dispatchIdentity\n          })\n        }\n      }\n\n      fn.assign(actions, new ActionsGenerator(...argsForConstructor))\n    } else {\n      fn.assign(actions, ActionsClass)\n    }\n\n    this.actions[key] = this.actions[key] || {}\n\n    fn.eachObject((actionName, action) => {\n      if (!fn.isFunction(action)) {\n        exportObj[actionName] = action\n        return\n      }\n\n      // Don't make an action out of method/function with\n      // \"alt:skipMakeAction\" metadata (via @Reflect.metadata decorator)\n      if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n        const skip = Reflect.getOwnMetadata('alt:skipMakeAction', action)\n\n        if (skip === true) {\n          exportObj[actionName] = action\n          return\n        }\n      }\n\n      // create the action\n      exportObj[actionName] = makeAction(\n        this,\n        key,\n        actionName,\n        action,\n        exportObj\n      )\n\n      // generate a constant\n      const constant = utils.formatAsConstant(actionName)\n      exportObj[constant] = exportObj[actionName].id\n    }, [actions])\n\n    return exportObj\n  }\n\n  takeSnapshot(...storeNames) {\n    const state = StateFunctions.snapshot(this, storeNames)\n    fn.assign(this._lastSnapshot, state)\n    return this.serialize(state)\n  }\n\n  rollback() {\n    StateFunctions.setAppState(\n      this,\n      this.serialize(this._lastSnapshot),\n      storeInst => {\n        storeInst.lifecycle('rollback')\n        storeInst.emitChange()\n      }\n    )\n  }\n\n  recycle(...storeNames) {\n    const initialSnapshot = storeNames.length\n      ? StateFunctions.filterSnapshots(\n          this,\n          this._initSnapshot,\n          storeNames\n        )\n      : this._initSnapshot\n\n    StateFunctions.setAppState(\n      this,\n      this.serialize(initialSnapshot),\n      (storeInst) => {\n        storeInst.lifecycle('init')\n        storeInst.emitChange()\n      }\n    )\n  }\n\n  flush() {\n    const state = this.serialize(StateFunctions.snapshot(this))\n    this.recycle()\n    return state\n  }\n\n  bootstrap(data) {\n    StateFunctions.setAppState(this, data, (storeInst, state) => {\n      storeInst.lifecycle('bootstrap', state)\n      storeInst.emitChange()\n    })\n  }\n\n  prepare(storeInst, payload) {\n    const data = {}\n    if (!storeInst.displayName) {\n      throw new ReferenceError('Store provided does not have a name')\n    }\n    data[storeInst.displayName] = payload\n    return this.serialize(data)\n  }\n\n  // Instance type methods for injecting alt into your application as context\n\n  addActions(name, ActionsClass, ...args) {\n    this.actions[name] = Array.isArray(ActionsClass)\n      ? this.generateActions.apply(this, ActionsClass)\n      : this.createActions(ActionsClass, ...args)\n  }\n\n  addStore(name, StoreModel, ...args) {\n    this.createStore(StoreModel, name, ...args)\n  }\n\n  getActions(name) {\n    return this.actions[name]\n  }\n\n  getStore(name) {\n    return this.stores[name]\n  }\n\n  static debug(name, alt, win) {\n    const key = 'alt.js.org'\n    let context = win\n    if (!context && typeof window !== 'undefined') {\n      context = window\n    }\n    if (typeof context !== 'undefined') {\n      context[key] = context[key] || []\n      context[key].push({ name, alt })\n    }\n    return alt\n  }\n}\n\nexport default Alt\n"],"names":["require$$0","isFunction","x","isMutableObject","target","Ctor","constructor","Object","prototype","toString","call","isFrozen","type","eachObject","f","o","forEach","from","keys","key","assign","source","value","setAppState","instance","data","onStore","obj","deserialize","store","stores","config","StoreModel","state","onDeserialize","fn","k","snapshot","storeNames","length","reduce","storeHandle","storeName","displayName","lifecycle","customSnapshot","onSerialize","getState","saveInitialSnapshot","serialize","_initSnapshot","_lastSnapshot","filterSnapshots","ReferenceError","builtIns","getOwnPropertyNames","NoopClass","builtInProto","getInternalMethods","Obj","isProto","excluded","m","indexOf","getPrototypeChain","methods","getPrototypeOf","warn","msg","console","uid","container","name","count","hasOwnProperty","String","formatAsConstant","replace","i","toLowerCase","toUpperCase","dispatchIdentity","a","undefined","concat","fsa","id","payload","details","dispatch","actionObj","alt","namespace","dispatchLater","dispatcher","AltStore","model","lifecycleEvents","transmitter","event","publish","preventDefault","boundListeners","subscriptions","output","emitChange","handleDispatch","e","handlesOwnErrors","publicMethods","dispatchToken","register","actionHandlers","actionListeners","action","otherwise","result","filter","Boolean","every","handler","cb","TypeError","dispose","subscribe","push","subscription","StoreMixin","sources","sourcesArray","Array","isArray","tokens","map","waitFor","asyncMethods","registerAsync","asyncDef","loadCounter","toExport","methodName","desc","spec","validHandlers","Error","args","getInstance","local","shouldFetch","intercept","interceptResponse","makeActionHandler","isError","fire","trapAsync","loading","remote","then","success","error","exportPublicMethods","lifecycleEvent","bus","bind","symbol","actions","matchFirstCharacter","assumedEventHandler","bindAction","listener","doSetState","storeInstance","nextState","setState","isDispatching","createPrototype","proto","extras","createStoreConfig","globalConfig","slice","currentState","transformStore","transforms","Store","transform","createStoreFromObject","StoreProto","bindListeners","observe","eventName","on","createStoreFromClass","argsForClass","datasource","utils","makeAction","implementation","_actionsRegistry","logAs","storeStateToLog","Reflect","getOwnMetadata","inject","diff","optionalArgs","apply","invocationResult","actionResult","isPromise","defer","setTimeout","namespaceId","constant","Alt","JSON","stringify","parse","Dispatcher","batchingFunction","callback","global","storeTransforms","Math","random","substr","fsaDetails","iden","module","hot","actionNames","createActions","ActionsClass","exportObj","argsForConstructor","ActionsGenerator","actionName","skip","StateFunctions","storeInst","initialSnapshot","recycle","generateActions","createStore","debug","win","context","window"],"mappings":"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"}